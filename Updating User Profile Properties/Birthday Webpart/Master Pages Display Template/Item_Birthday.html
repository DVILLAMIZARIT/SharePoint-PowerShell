<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>Birthday Cake</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:MasterPageDescription msdt:dt="string">Birthday Webpart</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#Content Web Parts;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:CrawlerXSLFile msdt:dt="string"></mso:CrawlerXSLFile>
<mso:ManagedPropertyMapping msdt:dt="string">&#39;WorkPhone&#39;:&#39;WorkPhone&#39;,&#39;MobilePhone&#39;:&#39;MobilePhone&#39;,&#39;RefinableDate00&#39;:&#39;RefinableDate00&#39;,&#39;AboutMe&#39;:&#39;AboutMe&#39;,&#39;AccountName&#39;:&#39;AccountName&#39;,&#39;BaseOfficeLocation&#39;:&#39;BaseOfficeLocation&#39;,&#39;Department&#39;:&#39;Department&#39;,&#39;HitHighlightedProperties&#39;:&#39;HitHighlightedProperties&#39;,&#39;Interests&#39;:&#39;Interests&#39;,&#39;JobTitle&#39;:&#39;JobTitle&#39;,&#39;LastModifiedTime&#39;:&#39;LastModifiedTime&#39;,&#39;Memberships&#39;:&#39;Memberships&#39;,&#39;PastProjects&#39;:&#39;PastProjects&#39;,&#39;Path&#39;:&#39;Path&#39;,&#39;PictureURL&#39;:&#39;PictureURL&#39;,&#39;PreferredName&#39;:&#39;PreferredName&#39;,&#39;Responsibilities&#39;:&#39;Responsibilities&#39;,&#39;Schools&#39;:&#39;Schools&#39;,&#39;ServiceApplicationID&#39;:&#39;ServiceApplicationID&#39;,&#39;SipAddress&#39;:&#39;SipAddress&#39;,&#39;Skills&#39;:&#39;Skills&#39;,&#39;UserProfile_GUID&#39;:&#39;UserProfile_GUID&#39;,&#39;WorkEmail&#39;:&#39;WorkEmail&#39;,&#39;WorkId&#39;:&#39;WorkId&#39;,&#39;YomiDisplayName&#39;:&#39;YomiDisplayName&#39;</mso:ManagedPropertyMapping>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
<mso:HtmlDesignStatusAndPreview msdt:dt="string">https://omninet.omnia.co.za/_catalogs/masterpage/Display Templates/Content Web Parts/Item_Birthday.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:HtmlDesignPreviewUrl msdt:dt="string"></mso:HtmlDesignPreviewUrl>
</mso:CustomDocumentProperties>
</xml><![endif]-->

</head>
<body>
    <div id="Item_Person"> 
<!--#_ 
                    if(!$isNull(ctx.CurrentItem) && !$isNull(ctx.ClientControl)){
                        var id = ctx.ClientControl.get_nextUniqueId();
                        var itemId = id + Srch.U.Ids.item;
                        $setResultItem(itemId, ctx.CurrentItem);
                        var container_id = id + "_peopleContainer";
                        var hhProps = Srch.U.createXMLDocument("<root>" + ctx.CurrentItem.HitHighlightedProperties + "</root>");
                        var encodedPath = $urlHtmlEncode(ctx.CurrentItem.Path);
                        var has_pn = !$isEmptyString(ctx.CurrentItem.PreferredName);
						var has_bd = !$isEmptyString(ctx.CurrentItem.RefinableDate00);
                        var has_query = !$isEmptyString(ctx.CurrentItem.ProfileQueriesFoundYou); 
                        var delimiter = "";
                        var userPersonaId = $htmlEncode(id) + "_peopleUserPersona";
                        var uSip = ctx.CurrentItem.SipAddress;
                        var uJobTitle = ctx.CurrentItem.JobTitle;
                        var uEmail = ctx.CurrentItem.WorkEmail;
                        var uName = ctx.CurrentItem.PreferredName;
                        var uPicUrl = ctx.CurrentItem.PictureURL;
                        uPicUrl = "https://omninet.omnia.co.za/Style%20Library/Scripts/Birthday%20Assets/birthday.png";
                        /*if(uPicUrl==null){
                            uPicUrl = "https://omninet.omnia.co.za/Style Library/Scripts/Birthday Assets/smallicon-email.png";
                        }*/
_#-->
                        <div id="_#= $htmlEncode(container_id) =#_" class="ms-srch-people-outerContainer" style="border: 1px solid black;padding-top: 5px;padding-left: 5px;padding-right: 5px;padding-bottom: 5px;">
                                <div id="UserPersonaContainer">
                                    <div id="UserPersona">                                        
                                        <div id="_#= userPersonaId =#_"></div>
                                      </div>
                                </div>
                                <div id="UserInfoContainer">
                                    <div id="ContactInfo">
                                        <div id="NameField">
<!--#_ 
                                            var encodedName = (has_pn == true) ? $htmlEncode(ctx.CurrentItem.PreferredName) : $htmlEncode(ctx.CurrentItem.YomiDisplayName);
                                            var displayName = Srch.U.getSingleHHXMLNodeValue(hhProps, "preferredname");
                                            if ($isEmptyString(displayName)) { displayName = encodedName }
_#-->
                                            <div id="NameValue" class="ms-srch-ellipsis ms-textLarge">
                                                <a clicktype="Result" id="NameFieldLink" href="mailto:_#= uEmail =#_?subject=Happy Birthday" title="_#= encodedName =#_">_#= displayName =#_</a>
                                                 <p>_#= uJobTitle =#_</p>
                                            </div>
                                        </div>
				
										<!--#_ 
                                        if(has_bd == true) {
_#-->
                                            <div id="Birthday">
<!--#_ 
                                                var encodedJtitle = $htmlEncode(ctx.CurrentItem.RefinableDate00);
                                                var displayJtitle = Srch.U.getSingleHHXMLNodeValue(hhProps, "RefinableDate00");
                                                if ($isEmptyString(displayJtitle)) { displayJtitle = encodedJtitle }					
_#--> 
                                                <nobr><span class="label">Birthday: </span><div id="Birthday" class="ms-srch-ellipsis" title="_#= encodedJtitle =#_"> _#= new Date(encodedJtitle).format("dd MMMM")  =#_ </div></nobr>
                                            </div>
<!--#_ 
                                        }
_#-->
                                    </div>
                                </div> 
                        </div>
<!--#_
                    AddPostRenderCallback(ctx, function(){
                        EnsureScriptFunc("clienttemplates.js", "RenderUserFieldWorker", function() {
                            var getUserPersona = function() {
                                var renderCtx = new ContextInfo();
                                renderCtx.Templates = {};
                                renderCtx.Templates["Fields"] = {};
                                var fieldSchemaData = { "PictureOnly":"1", "PictureSize": "Size_50px"};
                                var listSchema = {"EffectivePresenceEnabled": "0", "PresenceAlt": Srch.Res.item_People_NoPresenceAvailable};
                                var userData = {"title": uName, "email": uEmail, "picture": uPicUrl, "sip": uSip};
                                var personaControlElement = document.getElementById(userPersonaId);
                                if (!Srch.U.n(personaControlElement))
                                {
                                    personaControlElement.innerHTML = RenderUserFieldWorker(renderCtx, fieldSchemaData, userData, listSchema);
                                }
                                
                                if(typeof(ctx.EnqueueImnRequest) == "undefined") { ctx.EnqueueImnRequest = false; }
                                if (ctx.EnqueueImnRequest == false) {
                                    ctx.ClientControl.add_oneTimeResultRendered(function(){ if (typeof(ProcessImn) != "undefined") { ProcessImn(); } });
                                    ctx.EnqueueImnRequest = true;
                                 }
                                 
                            };
                            getUserPersona();
                        });
                    });
_#-->                        
<!--#_ 
                } 
_#-->
    </div>
</body>
</html>
